{"ast":null,"code":"import _asyncToGenerator from \"/Users/achrafbilal/Documents/GitHub/tp-controle-spring-boot/front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { __decorate } from \"tslib\";\nimport { Component } from \"@angular/core\";\nlet BillsComponent = class BillsComponent {\n  constructor(billService, formBuilder, authService, activatedRoute, router) {\n    this.billService = billService;\n    this.formBuilder = formBuilder;\n    this.authService = authService;\n    this.activatedRoute = activatedRoute;\n    this.router = router;\n    this.currentPage = 0;\n    this.pageSize = 5;\n    this.totalPages = 0;\n    this.totalElements = 0;\n    this.roundNumber = value => {\n      return Math.round(value);\n    };\n    this.handleGetPageBill = (page, size) => {\n      this.billService.getPageBills(page, size).subscribe({\n        next: data => {\n          console.log(data);\n          const {\n            content,\n            number,\n            size,\n            totalPages,\n            totalElements\n          } = data;\n          this.bills = content;\n          this.currentPage = number;\n          this.pageSize = size;\n          this.totalPages = totalPages;\n          this.totalElements = totalElements;\n        },\n        error: error => this.errorMessage = error.message\n      });\n    };\n    this.handleGetCustomerPageBill = (customerID, page, size) => {\n      this.billService.getBillsByCustomerId(customerID, page, size).subscribe({\n        next: data => {\n          console.log(data);\n          const {\n            content,\n            number,\n            size,\n            totalPages,\n            totalElements\n          } = data;\n          this.bills = content;\n          this.currentPage = number;\n          this.pageSize = size;\n          this.totalPages = totalPages;\n          this.totalElements = totalElements;\n        },\n        error: error => this.errorMessage = error.message\n      });\n    };\n  }\n  ngOnInit() {\n    const params = this.activatedRoute.snapshot.params;\n    this.searchFormGroup = this.formBuilder.group({\n      keyword: this.formBuilder.control(\"\")\n    });\n    if (params[\"id\"]) {\n      this.handleGetCustomerPageBill(Number(params[\"id\"]), this.currentPage, this.pageSize);\n    } else {\n      this.handleGetPageBill(this.currentPage, this.pageSize);\n    }\n  }\n  handleDeleteBill(bill) {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      if (bill.id) if (confirm(\"Are you sure you want to delete this bill\")) {\n        _this.billService.deleteBill(bill.id).subscribe(d => {\n          _this.billService.getPageBills(_this.currentPage, _this.pageSize).subscribe({\n            next: data => {\n              const {\n                content,\n                number,\n                size,\n                totalPages,\n                totalElements\n              } = data;\n              _this.bills = content;\n              _this.currentPage = number;\n              _this.pageSize = size;\n              _this.totalPages = totalPages;\n              _this.totalElements = totalElements;\n            },\n            error: error => _this.errorMessage = error.message\n          });\n        });\n      }\n    })();\n  }\n  handleNewBill() {\n    this.router.navigateByUrl(\"/admin/new-bill\");\n  }\n  handleEditBill(bill) {\n    this.router.navigateByUrl(`/admin/edit-bill/${bill.id}`);\n  }\n  handleShowBill(bill) {\n    this.router.navigateByUrl(`/admin/show-bill/${bill.id}`);\n  }\n};\nBillsComponent = __decorate([Component({\n  selector: \"app-bills\",\n  templateUrl: \"./bills.component.html\",\n  styleUrls: [\"./bills.component.scss\"]\n})], BillsComponent);\nexport { BillsComponent };","map":{"version":3,"mappings":"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","names":["Component","BillsComponent","constructor","billService","formBuilder","authService","activatedRoute","router","value","Math","round","page","size","getPageBills","subscribe","next","data","console","log","content","number","totalPages","totalElements","bills","currentPage","pageSize","error","errorMessage","message","customerID","getBillsByCustomerId","ngOnInit","params","snapshot","searchFormGroup","group","keyword","control","handleGetCustomerPageBill","Number","handleGetPageBill","handleDeleteBill","bill","id","confirm","deleteBill","d","handleNewBill","navigateByUrl","handleEditBill","handleShowBill","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["/Users/achrafbilal/Documents/GitHub/tp-controle-spring-boot/front/src/app/bills/bills.component.ts"],"sourcesContent":["import { SecurityService } from \"./../services/security.service\";\nimport { Bill, PageBill } from \"./../model/bill.model\";\n\nimport { BillService } from \"./../services/bill.service\";\nimport { Component, OnInit } from \"@angular/core\";\nimport { FormBuilder, FormGroup } from \"@angular/forms\";\nimport { Router, ActivatedRoute } from \"@angular/router\";\n\n@Component({\n  selector: \"app-bills\",\n  templateUrl: \"./bills.component.html\",\n  styleUrls: [\"./bills.component.scss\"],\n})\nexport class BillsComponent implements OnInit {\n  bills!: Array<Bill>;\n  errorMessage!: String;\n  searchFormGroup!: FormGroup;\n  currentPage: number = 0;\n  pageSize: number = 5;\n  totalPages: number = 0;\n  totalElements: number = 0;\n  customerID!: number;\n  constructor(\n    private billService: BillService,\n    private formBuilder: FormBuilder,\n    public authService: SecurityService,\n    private activatedRoute: ActivatedRoute,\n    private router: Router\n  ) {}\n\n  ngOnInit(): void {\n    const params = this.activatedRoute.snapshot.params;\n    this.searchFormGroup = this.formBuilder.group({\n      keyword: this.formBuilder.control(\"\"),\n    });\n    if (params[\"id\"]) {\n      this.handleGetCustomerPageBill(\n        Number(params[\"id\"]),\n        this.currentPage,\n        this.pageSize\n      );\n    } else {\n      this.handleGetPageBill(this.currentPage, this.pageSize);\n    }\n  }\n\n  async handleDeleteBill(bill: Bill) {\n    if (bill.id)\n      if (confirm(\"Are you sure you want to delete this bill\")) {\n        this.billService.deleteBill(bill.id).subscribe((d) => {\n          this.billService\n            .getPageBills(this.currentPage, this.pageSize)\n            .subscribe({\n              next: (data) => {\n                const { content, number, size, totalPages, totalElements } =\n                  data;\n                this.bills = content;\n                this.currentPage = number;\n                this.pageSize = size;\n                this.totalPages = totalPages;\n                this.totalElements = totalElements;\n              },\n              error: (error) => (this.errorMessage = error.message),\n            });\n        });\n      }\n  }\n  roundNumber = (value: number) => {\n    return Math.round(value);\n  };\n\n  handleGetPageBill = (page: number, size: number) => {\n    this.billService.getPageBills(page, size).subscribe({\n      next: (data) => {\n        console.log(data);\n\n        const { content, number, size, totalPages, totalElements } = data;\n        this.bills = content;\n        this.currentPage = number;\n        this.pageSize = size;\n        this.totalPages = totalPages;\n        this.totalElements = totalElements;\n      },\n      error: (error) => (this.errorMessage = error.message),\n    });\n  };\n  handleGetCustomerPageBill = (\n    customerID: number,\n    page: number,\n    size: number\n  ) => {\n    this.billService.getBillsByCustomerId(customerID, page, size).subscribe({\n      next: (data) => {\n        console.log(data);\n        const { content, number, size, totalPages, totalElements } = data;\n        this.bills = content;\n        this.currentPage = number;\n        this.pageSize = size;\n        this.totalPages = totalPages;\n        this.totalElements = totalElements;\n      },\n      error: (error) => (this.errorMessage = error.message),\n    });\n  };\n  handleNewBill() {\n    this.router.navigateByUrl(\"/admin/new-bill\");\n  }\n  handleEditBill(bill: Bill) {\n    this.router.navigateByUrl(`/admin/edit-bill/${bill.id}`);\n  }\n  handleShowBill(bill: Bill) {\n    this.router.navigateByUrl(`/admin/show-bill/${bill.id}`);\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}