{"ast":null,"code":"import _asyncToGenerator from \"/Users/achrafbilal/Documents/GitHub/tp-controle-spring-boot/front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { __decorate } from \"tslib\";\nimport { Component } from \"@angular/core\";\nlet BillsComponent = class BillsComponent {\n  constructor(billService, formBuilder, authService, activatedRoute, route) {\n    this.billService = billService;\n    this.formBuilder = formBuilder;\n    this.authService = authService;\n    this.activatedRoute = activatedRoute;\n    this.route = route;\n    this.currentPage = 0;\n    this.pageSize = 5;\n    this.totalPages = 0;\n    this.totalElements = 0;\n    this.roundNumber = value => {\n      return Math.round(value);\n    };\n    this.handleGetPageBill = (keyword, page, size) => {\n      this.billService.getPageBillsByKeyword(keyword, page, size).subscribe({\n        next: data => {\n          this.bills = data._embedded.bills;\n          this.currentPage = data.page.number;\n          this.pageSize = data.page.size;\n          this.totalPages = data.page.totalPages;\n          this.totalElements = data.page.totalElements;\n        },\n        error: error => this.errorMessage = error.message\n      });\n    };\n    this.handleSearchPageBillsByKeyword = () => {\n      this.currentPage = 0;\n      this.billService.getPageBillsByKeyword(this.searchFormGroup.value.keyword, this.currentPage, this.pageSize).subscribe({\n        next: data => {\n          let {\n            bills\n          } = data._embedded;\n          let {\n            number,\n            totalElements,\n            totalPages,\n            size\n          } = data.page;\n          this.bills = bills;\n          this.currentPage = number;\n          this.pageSize = size;\n          this.totalPages = totalPages;\n          this.totalElements = totalElements;\n        },\n        error: error => {\n          this.errorMessage = error.message;\n        }\n      });\n    };\n  }\n  ngOnInit() {\n    this.searchFormGroup = this.formBuilder.group({\n      keyword: this.formBuilder.control(\"\")\n    });\n    this.handleGetPageBill(\"\", this.currentPage, this.pageSize);\n  }\n  handleDeleteBill(bill) {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      if (confirm(\"Are you sure you want to delete this bill\")) {\n        _this.billService.deleteBill(bill.id).subscribe(d => {\n          _this.billService.getPageBillsByKeyword();\n        });\n      }\n    })();\n  }\n  handleNewBill() {\n    this.router.navigateByUrl(\"/new-bill\");\n  }\n  handleEditBill(bill) {\n    this.router.navigateByUrl(`/edit-bill/${bill.id}`);\n  }\n};\nBillsComponent = __decorate([Component({\n  selector: \"app-bills\",\n  templateUrl: \"./bills.component.html\",\n  styleUrls: [\"./bills.component.scss\"]\n})], BillsComponent);\nexport { BillsComponent };","map":{"version":3,"mappings":"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","names":["Component","BillsComponent","constructor","billService","formBuilder","authService","activatedRoute","route","value","Math","round","keyword","page","size","getPageBillsByKeyword","subscribe","next","data","bills","_embedded","currentPage","number","pageSize","totalPages","totalElements","error","errorMessage","message","searchFormGroup","ngOnInit","group","control","handleGetPageBill","handleDeleteBill","bill","confirm","deleteBill","id","d","handleNewBill","router","navigateByUrl","handleEditBill","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["/Users/achrafbilal/Documents/GitHub/tp-controle-spring-boot/front/src/app/bills/bills.component.ts"],"sourcesContent":["import { AuthenticationService } from \"./../services/authentication.service\";\nimport { Bill, PageBill } from \"./../model/bill.model\";\n\nimport { BillService } from \"./../services/bill.service\";\nimport { Component, OnInit } from \"@angular/core\";\nimport { FormBuilder, FormGroup } from \"@angular/forms\";\nimport { Router, ActivatedRoute } from \"@angular/router\";\n\n@Component({\n  selector: \"app-bills\",\n  templateUrl: \"./bills.component.html\",\n  styleUrls: [\"./bills.component.scss\"],\n})\nexport class BillsComponent implements OnInit {\n  bills!: Array<Bill>;\n  errorMessage!: String;\n  searchFormGroup!: FormGroup;\n  currentPage: number = 0;\n  pageSize: number = 5;\n  totalPages: number = 0;\n  totalElements: number = 0;\n  constructor(\n    private billService: BillService,\n    private formBuilder: FormBuilder,\n    public authService: AuthenticationService,\n    private activatedRoute: ActivatedRoute,\n    private route: Route\n  ) {}\n\n  ngOnInit(): void {\n    this.searchFormGroup = this.formBuilder.group({\n      keyword: this.formBuilder.control(\"\"),\n    });\n    this.handleGetPageBill(\"\", this.currentPage, this.pageSize);\n  }\n\n  async handleDeleteBill(bill: Bill) {\n    if (confirm(\"Are you sure you want to delete this bill\")) {\n      this.billService.deleteBill(bill.id).subscribe((d) => {\n        this.billService.getPageBillsByKeyword();\n      });\n    }\n  }\n  roundNumber = (value: number) => {\n    return Math.round(value);\n  };\n\n  handleGetPageBill = (keyword: string, page: number, size: number) => {\n    this.billService.getPageBillsByKeyword(keyword, page, size).subscribe({\n      next: (data) => {\n        this.bills = data._embedded.bills;\n        this.currentPage = data.page.number;\n        this.pageSize = data.page.size;\n        this.totalPages = data.page.totalPages;\n        this.totalElements = data.page.totalElements;\n      },\n      error: (error) => (this.errorMessage = error.message),\n    });\n  };\n  handleSearchPageBillsByKeyword = () => {\n    this.currentPage = 0;\n    this.billService\n      .getPageBillsByKeyword(\n        this.searchFormGroup.value.keyword,\n        this.currentPage,\n        this.pageSize\n      )\n      .subscribe({\n        next: (data: PageBill) => {\n          let { bills } = data._embedded;\n          let { number, totalElements, totalPages, size } = data.page;\n          this.bills = bills;\n          this.currentPage = number;\n          this.pageSize = size;\n          this.totalPages = totalPages;\n          this.totalElements = totalElements;\n        },\n        error: (error) => {\n          this.errorMessage = error.message;\n        },\n      });\n  };\n  handleNewBill() {\n    this.router.navigateByUrl(\"/new-bill\");\n  }\n  handleEditBill(bill: Bill) {\n    this.router.navigateByUrl(`/edit-bill/${bill.id}`);\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}